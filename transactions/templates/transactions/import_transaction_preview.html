{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>Import Preview</h2>
  <p class="text-muted">Review transactions before confirming import.</p>
  <p class="text-info">Found {{ transactions|length }} transaction(s).</p>

  {% if transactions %}
    <pre>{{ transactions.0|default:"No first transaction" }}</pre>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Date</th>
            <th>Description</th>
            <th class="text-end">Amount</th>
            <th>Bank Account</th>
            <th>Payoree</th>
            <th>Subcategory</th>
          </tr>
        </thead>
        <tbody>
          {% for txn in transactions %}
          <tr>
            <td>{{ txn.date|default:"-" }}</td>
            <td>{{ txn.description|default:"-" }}</td>
            <td class="text-end">${{ txn.amount|default:"0"|floatformat:2 }}</td>
            <td>{{ txn.bank_account|default:"-" }}</td>
            <td>{{ txn.payoree|default:"-" }}</td>
            <td>{{ txn.subcategory|default:"-" }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-end mt-3">
      <a href="{% url 'import_transactions_upload' %}" class="btn btn-secondary me-2">Back</a>
      <a href="{% url 'review_transaction' %}" class="btn btn-outline-primary me-2">Review One by One</a>
    </div>

<form method="post" action="{% url 'import_transactions_confirm' %}">
  {% csrf_token %}
  <button type="submit" class="btn btn-success">Import All</button>
</form>

  {% else %}
    <p>No transactions to display.</p>
  {% endif %}
</div>
{% endblock %}
