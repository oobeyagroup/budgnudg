{% extends "base.html" %}
{% load humanize %} 
{% block title %}Uncategorized Transactions{% endblock %}

{% block content %}
<h2>Uncategorized Transactions</h2>
<div class="table-responsive">
  <table id="transactionTable" class="table table-striped table-bordered">
    <colgroup>
        <col style="width: 5%;">
        <col style="width: 40%;">
        <col style="width: 10%;">
        <col style="width: 15%;">
        <col style="width: 15%;">
        <col style="width: 10%;">
    </colgroup>

    <thead class="table-dark">
      <tr>
        <th>Date</th>
        <th>Description</th>
        <th>Amount</th>
        <th>Subcategory</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for txn in transactions %}
      <tr>
        <td>{{ txn.date|date:"n/j/y" }}</td>
        <td>{{ txn.description|truncatechars:60 }}</td>
        <td class="text-end">${{ txn.amount|floatformat:2|intcomma }}</td>
        <td>
          {% if txn.subcategory %}
            {{ txn.subcategory.name }}
          {% else %}
            None
          {% endif %}
        </td>
        <td>
          {% if txn.subcategory and txn.subcategory.parent %}
            {{ txn.subcategory.parent.name }}
          {% else %}
            None
          {% endif %}
        </td>
        <td>
          <a href="{% url 'categorize_transaction' txn.pk %}">Edit</a> |
          <a href="{% url 'resolve_transaction' txn.pk %}">Suggest</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6">No uncategorized transactions found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}