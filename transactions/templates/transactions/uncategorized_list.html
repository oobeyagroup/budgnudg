{% extends "base.html" %}
{% load humanize %}
{% block title %}Uncategorized Transactions{% endblock %}

{% block content %}
<h2>Uncategorized Transactions</h2>
<div class="table-responsive">
  <table id="transactionTable" class="table table-striped table-bordered" style="width:100%; table-layout:fixed; text-nowrap">
    <thead class="table-dark">
      <tr>
        <th style="width:5%;">Date</th>
        <th style="width:40%;">Description</th>
        <th style="width:10%;">Amount</th>
        <th style="width:15%;">Subcategory</th>
        <th style="width:15%;">Category</th>
        <th style="width:10%;">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for txn in transactions %}
      <tr>
        <td>{{ txn.date|date:"n/j/y" }}</td>
        <td class="truncate" title="{{ txn.description }}">{{ txn.description }}</td>
        <td class="text-end">${{ txn.amount|floatformat:2|intcomma }}</td>
        <td class="truncate" title="{{ txn.subcategory.name|default:"None" }}">{{ txn.subcategory.name|default:"None" }}</td>
        <td class="truncate" title="{{ txn.subcategory.parent.name|default:"None" }}">{{ txn.subcategory.parent.name|default:"None" }}</td>
        <td>
          <a href="{% url 'categorize_transaction' txn.pk %}">Edit</a> |
          <a href="{% url 'resolve_transaction' txn.pk %}">Suggest</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}